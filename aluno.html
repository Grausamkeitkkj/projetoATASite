<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <!-- METAS -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- TITLE -->
        <title>ATA Martial Arts Viamão</title>
        <!-- ESTILOS -->
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="imagens/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="imagens/favicon-16x16.png">
        <link rel="stylesheet" type="text/css" href="style.css">
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
        <!-- SCRIPT -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    </head>
    <body>
        <!-- Inicio - NavBar -->
        <section class="navigation">
            <div class="nav-container">
                <div class="brand">
                    <a href="index.html">
                        <img class="ATA-LOGO" src="imagens/ATA.jpg">
                    </a>
                </div>
                <nav>
                    <div class="nav-mobile">
                        <a id="nav-toggle" href="#">
                            <span></span>
                        </a>
                    </div>
                    <ul class="nav-list">
                        <li>
                            <a href="#">Cadastrar</a>
                            <ul class="nav-dropdown">
                                <li>
                                    <a href="aluno.html">Aluno</a>
                                </li>
                                <li>
                                    <a href="professor.html">Professor</a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="presenca.html">Presenças</a>
                        </li>
                        <li>
                            <a href="#">Cronograma e Agendamentos</a>
                            <ul class="nav-dropdown">
                                <li>
                                    <a href="#">Aulas experimentais</a>
                                </li>
                                <li>
                                    <a href="#">Cronograma de Aulas</a>
                                </li>
                                <li>
                                    <a href="#">Cronograma de eventos e graduações</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </nav>
            </div>
        </section>
        <!-- Fim - NavBar -->
        <article class="article-cadastro">
            <h2 class="form-cadastro-titulo">Cadastro Aluno</h2>
            <form class="form-cadastro" id="form_cadastro" action="http://localhost:3003/aluno" method="post">
                <h3 class="titulo-form">Informações Pessoais</h3>
                <input class="form-input-cadastro" type="text" placeholder="Nome Completo" id="nome" name="nome" required>
                <input class="form-input-cadastro" type="text" placeholder="Data de Nascimento" id="data_nascimento" name="data_nascimento">
                <label class="form-label-cadastro" for="genero">Gênero:</label>
                <select class="form-select-cadastro" name="genero">
                  <option value="">Selecione</option>
                  <option value="1">Masculino</option>
                  <option value="2">Feminino</option>
                </select>
                <input class="form-input-cadastro" type="text" placeholder="CPF" id="cpf" name="cpf">
                <input class="form-input-cadastro" type="text" placeholder="RG" id="rg" name="rg">
                <input class="form-input-cadastro" type="text" placeholder="Telefone " id="telefone" name="telefone"required>
                <input class="form-input-cadastro" type="text" placeholder="Nome dos pais(responsáveis)" id="nome_pais_responsaveis" name="nome_pais_responsaveis">
                <input class="form-input-cadastro" type="text" placeholder="Telefone de emergência dos responsáveis" id="telefone_emergencia" name="telefone_emergencia" required>
                <label class="form-label-cadastro" for="telefone_emergencia">Faixa:</label required>
                <select class="form-select-cadastro" name="faixa">
                <option value="">Selecione</option>
                <option value="1">Branca Recomendada</option>
                <option value="2">Branca Decidida</option>
                <option value="3">Laranja Recomendada</option>
                <option value="4">Laranja Decidida</option>
                <option value="5">Amarela Recomendada</option>
                <option value="6">Amarela Decidida</option>
                <option value="7">Camuflada Recomendada</option>
                <option value="8">Camuflada Decidida</option>
                <option value="9">Verde Recomendada</option>
                <option value="10">Verde Decidida</option>
                <option value="11">Roxa Recomendada</option>
                <option value="12">Roxa Decidida</option>
                <option value="13">Azul Recomendada</option>
                <option value="14">Azul Decidida</option>
                <option value="15">Marrom Recomendada</option>
                <option value="16">Marrom Decidida</option>
                <option value="17">Vermelha Recomendada</option>
                <option value="18">Vermelha Decidida</option>
                <option value="19">Vermelha e Preta</option>
                <option value="20">Preta</option>
              </select>
                <h3 class="titulo-form">Informações Médicas</h3>
                <input class="form-input-cadastro" type="text" placeholder="Alergias" id="alergias" name="alergias">
                <input class="form-input-cadastro" type="text" placeholder="Medicações" id="medicacoes" name="medicacoes">
                <input class="form-input-cadastro" type="text" placeholder="Histórico de Lesões" id="historico_lesoes" name="historico_lesoes">
                <input class="form-input-cadastro" type="text" placeholder="Avaliação Médica" id="avaliacao_medica" name="avaliacao_medica" >
                <button class="form-button-cadastro" type="submit">Cadastrar</button>
            </form>
        </article>
        <!-- SCRIPT -->
        <script type="text/javascript" src="script.js"></script>
        <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.js"></script>
        <script>
            document.getElementById('form-cadastro').addEventListener('submit', function(e) {
                e.preventDefault();

                var formData = new FormData(this);

                fetch(this.action, {
                    method: 'POST', 
                    body: formData,
                }).then(response => {
                    console.log(response.status);
                    if (response.ok) {
                        // Se os dados foram salvos com sucesso
                        alert('Dados salvos com sucesso!');
                    } else {
                        // Se houve um erro ao salvar os dados 
                        response.text().then(text => alert('Houve um erro ao salvar os dados: ' + text));
                    }
                })
                .catch(error => {
                    // Em caso de erro na requisição
                    console.error('Erro na requisição:', error);
                    alert('Erro ao tentar salvar os dados: ' + error.message);
                });
            });
                        
            $('#cpf').mask('000.000.000-00', {reverse: true});
            $('#telefone').mask('(00) 00000-0000');
            $('#telefone_emergencia').mask('(00) 00000-0000');
            //$('#data_nascimento').mask('00/00/0000');
        </script>
    </body>
</html>
